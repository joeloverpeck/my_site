webpackJsonp([15],{812:function(e,t,n){"use strict";var r=n(628),o=n(813);r.Observable.prototype.filter=o.filter},813:function(e,t,n){"use strict";function r(e,t){return this.lift(new l(e,t))}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(632);t.filter=r;var l=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t._subscribe(new i(e,this.predicate,this.thisArg))},e}(),i=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0,this.predicate=n}return o(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(a.Subscriber)},814:function(e,t,n){"use strict";var r=n(628),o=n(815);r.Observable.prototype.distinct=o.distinct},815:function(e,t,n){"use strict";function r(e,t){return this.lift(new i(e,t))}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(739),l=n(735);t.distinct=r;var i=function(){function e(e,t){this.compare=e,this.flushes=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.compare,this.flushes))},e}(),u=function(e){function t(t,n,r){e.call(this,t),this.values=[],"function"==typeof n&&(this.compare=n),r&&this.add(l.subscribeToResult(this,r))}return o(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.values.length=0},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){var t=!1,n=this.values,r=n.length;try{for(var o=0;o<r;o++)if(this.compare(n[o],e))return void(t=!0)}catch(a){return void this.destination.error(a)}this.values.push(e),this.destination.next(e)},t.prototype.compare=function(e,t){return e===t},t}(a.OuterSubscriber);t.DistinctSubscriber=u},834:function(e,t,n){"use strict";e.exports=n(835)},835:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){return l["default"].createElement("div",{id:"spinner",className:u["default"].spinnerContainer},l["default"].createElement("div",{className:u["default"].spinner}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(197),l=r(a),i=n(836),u=r(i)},836:function(e,t){e.exports={spinnerContainer:"_72qNE",spinner:"_1d72G",standard:"_10oQR"}},859:function(e,t,n){"use strict";e.exports=n(860)},860:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){return l["default"].createElement("div",{className:s["default"].container},l["default"].createElement("a",{href:"/"},l["default"].createElement(u["default"],{type:"logo",className:s["default"].logo})),l["default"].createElement("p",{className:s["default"].text},"Make something awesome"))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(197),l=r(a),i=n(612),u=r(i),c=n(861),s=r(c)},861:function(e,t){e.exports={container:"_2WMKE",logo:"_1Ig-9",text:"_1cQDt"}},868:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(408),a=r(o),l=function(e){return function(t){var n=e(t);return(0,a["default"])(n,t),n}};t["default"]=l},915:function(e,t,n){"use strict";e.exports=n(916)},916:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.title,n=e.className,r=e.children;return l["default"].createElement("div",{className:(0,u["default"])(s["default"].container,n)},l["default"].createElement("div",{className:s["default"].containerPageHeader},l["default"].createElement("h1",{className:s["default"].title},t),l["default"].createElement("div",{className:s["default"].children},r)))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(197),l=r(a),i=n(602),u=r(i),c=n(917),s=r(c);o.propTypes={title:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.element]).isRequired,className:a.PropTypes.string,children:a.PropTypes.element}},917:function(e,t){e.exports={container:"_2v9nm _1iK9o _22ZDn dvlCB",containerPageHeader:"gyGom _22ZDn dvlCB CTQC5",title:"_1GUcz _36jaJ _2lCRJ _36jaJ",children:"_3NchO _2W2Kx _30lHv _1vc38 G9m3o"}},1020:function(e,t,n){"use strict";e.exports=n(1021)},1021:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(197),c=r(u),s=n(628);n(642),n(732),n(812),n(722),n(814),n(740),n(742);var d=n(577),f=n(595),p=n(1022),h=r(p),m=n(1023),v=r(m),y=n(1026),_=r(y),b=n(1028),P=r(b),x=n(1030),E=r(x),g=n(1033),C=r(g),T=n(834),R=r(T),j=n(859),M=r(j),O="CollectionFeed",k={type:u.PropTypes.oneOf(["all","curated","featured","user"]),collections:u.PropTypes.array,handleFetch:u.PropTypes.func,initialPage:u.PropTypes.number,maxPage:u.PropTypes.number,perPage:u.PropTypes.number.isRequired,pixelRatio:u.PropTypes.number.isRequired,raven:u.PropTypes.object.isRequired,location:u.PropTypes.object.isRequired,actions:u.PropTypes.object.isRequired,lastPageFetched:u.PropTypes.number,showPlaceholder:u.PropTypes.bool},w={collections:[],handleFetch:null,intialPage:2,showPlaceholder:!1},F=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"componentDidMount",value:function(){this.addScrollSubscription()}},{key:"componentWillUnmount",value:function(){this.removeScrollSubscription()}},{key:"addScrollSubscription",value:function(){var e=this,t=s.Observable.fromEvent(window,"scroll").filter(function(){return(0,f.shouldFetchMoreContent)()}).map(function(){return e.props.lastPageFetched}).distinct();this.scrollSubscription=t.subscribe(this.fetchCollections.bind(this)),this.fetchCollections()}},{key:"removeScrollSubscription",value:function(){this.scrollSubscription&&this.scrollSubscription.unsubscribe(),this.fetchSubscription&&this.fetchSubscription.unsubscribe()}},{key:"fetchCollections",value:function(){var e=this,t=this.props,n=t.handleFetch,r=t.maxPage,o=t.raven,a=t.actions,l=t.lastPageFetched,i=t.perPage;if(n&&!(l>r)){var u=l+1,c=s.Observable.defer(function(){return n(u,i).then(d.toJson)}).retry(3).take(1);this.fetchSubscription=c.subscribe(function(t){e.trackPageView(),a.addCollectionsToCollectionFeed(t),a.updateCollectionFeed({lastPageFetched:u})},function(e){o.captureException(e,{tags:{component:"CollectionFeed"}})})}}},{key:"trackPageView",value:function(){var e=this.props.location;window.ga("send","pageview",e.pathname)}},{key:"renderSpinner",value:function(){var e=this.props,t=e.maxPage,n=e.lastPageFetched;if(n<t)return c["default"].createElement(R["default"],null)}},{key:"renderEndContent",value:function(){var e=this.props,t=e.maxPage,n=e.lastPageFetched;if(n>=t)return c["default"].createElement(M["default"],null)}},{key:"renderCollectionType",value:function(){var e=this.props,t=e.type,n=e.collections,r=e.pixelRatio,o=e.actions;switch(t){case"curated":return c["default"].createElement(P["default"],{collections:n,pixelRatio:r,actions:o});case"featured":return c["default"].createElement(_["default"],{collections:n,pixelRatio:r,actions:o});case"user":return c["default"].createElement(E["default"],{collections:n,pixelRatio:r,actions:o});case"all":return c["default"].createElement(v["default"],{collections:n,pixelRatio:r,actions:o});default:return c["default"].createElement(v["default"],{collections:n,pixelRatio:r,actions:o})}}},{key:"render",value:function(){var e=this.props,t=e.showPlaceholder,n=e.type;return t?c["default"].createElement(C["default"],{type:n}):c["default"].createElement("div",{className:h["default"].container},this.renderCollectionType(),this.renderSpinner(),this.renderEndContent())}}]),t}(u.Component);t["default"]=F,F.propTypes=k,F.defaultProps=w,F.displayName=O},1022:function(e,t){e.exports={container:"_3iqYm _22ZDn dvlCB"}},1023:function(e,t,n){"use strict";e.exports=n(1024)},1024:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(197),a=r(o),l=n(1025),i=r(l),u=n(611),c=r(u),s=n(606),d=r(s),f=n(603),p=r(f),h=n(763),m=r(h),v=(0,c["default"])((0,d["default"])("CollectionFeedAll"),(0,p["default"])({collections:o.PropTypes.array.isRequired,pixelRatio:o.PropTypes.number,actions:o.PropTypes.object.isRequired}));t["default"]=v(function(e){var t=e.collections,n=e.pixelRatio,r=e.actions,o=(0,i["default"])(t,8);return a["default"].createElement("div",null,o.map(function(e,t){var o=e.filter(function(e,t){return t<=1}),l=e.filter(function(e,t){return t>=2});return a["default"].createElement("div",{key:t},a["default"].createElement("div",null,o.map(function(e,t){return a["default"].createElement(m["default"],{key:t,collection:e,columns:2,pixelRatio:n,actions:r})})),a["default"].createElement("div",null,l.map(function(e,t){return a["default"].createElement(m["default"],{key:t,collection:e,columns:3,pixelRatio:n,actions:r})})))}))})},1025:function(e,t,n){function r(e,t){t=i(a(t),0);var n=e?e.length:0;if(!n||t<1)return[];for(var r=0,u=-1,c=Array(l(n/t));r<n;)c[++u]=o(e,r,r+=t);return c}var o=n(509),a=n(704),l=Math.ceil,i=Math.max;e.exports=r},1026:function(e,t,n){"use strict";e.exports=n(1027)},1027:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(197),a=r(o),l=n(611),i=r(l),u=n(606),c=r(u),s=n(603),d=r(s),f=n(763),p=r(f),h=(0,i["default"])((0,c["default"])("CollectionFeedFeatured"),(0,d["default"])({collections:o.PropTypes.array.isRequired,pixelRatio:o.PropTypes.number,actions:o.PropTypes.object.isRequired}));t["default"]=h(function(e){var t=e.collections,n=e.pixelRatio,r=e.actions;return a["default"].createElement("div",null,t.map(function(e,t){return a["default"].createElement(p["default"],{key:t,collection:e,columns:3,pixelRatio:n,actions:r})}))})},1028:function(e,t,n){"use strict";e.exports=n(1029)},1029:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(197),a=r(o),l=n(611),i=r(l),u=n(606),c=r(u),s=n(603),d=r(s),f=n(763),p=r(f),h=(0,i["default"])((0,c["default"])("CollectionFeedCurated"),(0,d["default"])({collections:o.PropTypes.array.isRequired,pixelRatio:o.PropTypes.number,actions:o.PropTypes.object.isRequired}));t["default"]=h(function(e){var t=e.collections,n=e.pixelRatio,r=e.actions,o=t.map(function(e,t){var o=t<=1?1:2;return a["default"].createElement(p["default"],{key:t,collection:e,columns:o,pixelRatio:n,actions:r})});return a["default"].createElement("div",null,o)})},1030:function(e,t,n){"use strict";e.exports=n(1031)},1031:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(197),a=r(o),l=n(611),i=r(l),u=n(606),c=r(u),s=n(603),d=r(s),f=n(1032),p=r(f),h=n(763),m=r(h),v=(0,i["default"])((0,c["default"])("CollectionFeedUser"),(0,d["default"])({collections:o.PropTypes.array.isRequired,pixelRatio:o.PropTypes.number,actions:o.PropTypes.object.isRequired}));t["default"]=v(function(e){var t=e.collections,n=e.pixelRatio,r=e.actions,o=t.filter(function(e){return e.curated}),l=t.filter(function(e){return!e.curated});return a["default"].createElement("div",{className:p["default"].container},a["default"].createElement("div",null,o.map(function(e,t){return a["default"].createElement(m["default"],{key:t,collection:e,columns:1,pixelRatio:n,actions:r})})),a["default"].createElement("div",null,l.map(function(e,t){return a["default"].createElement(m["default"],{key:t,collection:e,columns:2,pixelRatio:n,actions:r})})))})},1032:function(e,t){e.exports={container:"_2UD1L _22ZDn dvlCB"}},1033:function(e,t,n){"use strict";e.exports=n(1034)},1034:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(197),l=r(a),i=n(611),u=r(i),c=n(606),s=r(c),d=n(603),f=r(d),p=n(1035),h=r(p),m=(0,u["default"])((0,s["default"])("CollectionFeedPlaceholder"),(0,f["default"])({type:a.PropTypes.oneOf(["all","curated","featured","user"])})),v={all:8,curated:5,featured:9,user:4};t["default"]=m(function(e){var t=e.type,n="user"===t,r="all"===t,a="curated"===t,i=[].concat(o(Array(v[t]).keys()));return l["default"].createElement("div",{className:h["default"].container},i.map(function(e,t){return r&&t<2||n?l["default"].createElement("div",{key:t,className:h["default"].halfContainer},l["default"].createElement("div",{className:h["default"].half})):a&&t<2?l["default"].createElement("div",{key:t,className:h["default"].fullContainer},l["default"].createElement("div",{className:h["default"].full})):l["default"].createElement("div",{key:t,className:h["default"].thirdContainer},l["default"].createElement("div",{className:h["default"].third}))}))})},1035:function(e,t){e.exports={container:"rjSA7 _1iK9o _22ZDn dvlCB _3vG8-",fullContainer:"_2q62V _13jTO CTQC5 _1vc38",halfContainer:"vlmaW _13jTO _3kobr _1vc38",thirdContainer:"_1I7kb _13jTO _3kobr _2axTb _1vc38",full:"_1uq5P",half:"_1DUUw",third:"GwVdi",placeholderAnimation:"_9zdd9"}},1038:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1039),a=r(o);t["default"]={component:a["default"]}},1039:function(e,t,n){"use strict";e.exports=n(1040)},1040:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){e.params,e.loadContext;return void t()}function a(e){return function(t){return e.custom.listCuratedFeaturedCollections(t)}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(197),i=r(l),u=n(542),c=r(u),s=n(606),d=r(s),f=n(603),p=r(f),h=n(604),m=r(h),v=n(868),y=r(v),_=n(795),b=r(_),P=n(611),x=r(P),E=n(576),g=n(497),C=r(g),T=n(1041),R=r(T),j=n(1020),M=r(j),O=n(1047),k=n(713),w=n(595),F=(0,y["default"])((0,x["default"])((0,d["default"])("CollectionsAll"),(0,p["default"])({collectionFeed:l.PropTypes.object,location:l.PropTypes.object.isRequired,initialPage:l.PropTypes.number,pixelRatio:l.PropTypes.number.isRequired,raven:l.PropTypes.object.isRequired,api:l.PropTypes.object.isRequired,actions:l.PropTypes.object.isRequired}),(0,b["default"])({componentDidMount:function(){var e=this.props,t=e.actions,n=e.collectionFeed,r=e.api,o=n.perPage,a=void 0;r.custom.listCuratedFeaturedCollections(1,o).then(function(e){return a=Math.round(e.headers.get("x-total")/o),e}).then(E.toJson).then(function(e){t.resetCollectionFeed({orderBy:n.orderBy,lastPageFetched:1,perPage:o,maxPage:a,collections:e})})},componentWillUnmount:function(){var e=this.props.actions;e.resetCollectionFeed()}}),(0,m["default"])("loadProps",o)));t["default"]=F(function(e){var t=e.collectionFeed,n=e.location,r=e.raven,o=e.api,l=e.actions,u=e.pixelRatio,s=t.collections,d=t.maxPage,f=t.initialPage,p=t.perPage,h=t.lastPageFetched,m=""+(0,w.nodeUrl)()+n.pathname,v=(0,C["default"])(s,"[0].cover_photo"),y=0===t.collections.length&&!t.maxPage;return i["default"].createElement(R["default"],{location:n},i["default"].createElement("div",null,i["default"].createElement(c["default"],{title:O.title,description:O.description,meta:(0,k.buildCollectionMetas)(v,O.title,O.description,m),link:(0,k.buildLinks)(O.canonical)}),i["default"].createElement(M["default"],{showPlaceholder:y,type:"all",collections:s,maxPage:d,initialPage:f,lastPageFetched:h,handleFetch:a(o),perPage:p,raven:r,location:n,pixelRatio:u,actions:l})))})},1041:function(e,t,n){"use strict";e.exports=n(1042)},1042:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(197),a=r(o),l=n(606),i=r(l),u=n(603),c=r(u),s=n(611),d=r(s),f=n(915),p=r(f),h=n(1043),m=r(h),v=n(1046),y=r(v),_=n(595),b=(0,d["default"])((0,i["default"])("CollectionShowcase"),(0,c["default"])({children:o.PropTypes.element.isRequired,location:o.PropTypes.object.isRequired}));t["default"]=b(function(e){var t=e.location,n=e.children;return a["default"].createElement("div",{className:y["default"].container},a["default"].createElement(p["default"],{title:"Collections"},a["default"].createElement("p",null,"Explore the world through collections of beautiful photos free to use under the ",a["default"].createElement("a",{href:(0,_.railsUrl)()+"/license"},"Unsplash License"),".")),a["default"].createElement(m["default"],{location:t}),a["default"].createElement("div",null,a["default"].cloneElement(n,e)))})},1043:function(e,t,n){"use strict";e.exports=n(1044)},1044:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(197),a=r(o),l=n(606),i=r(l),u=n(603),c=r(u),s=n(611),d=r(s),f=n(648),p=r(f),h=n(1045),m=r(h),v=(0,d["default"])((0,i["default"])("PageLink"),(0,c["default"])({label:o.PropTypes.string.isRequired,pathname:o.PropTypes.string.isRequired}))(function(e){var t=e.label,n=e.pathname;return a["default"].createElement(p["default"],{to:{pathname:n},className:m["default"].pageLink,activeClassName:m["default"].activePageLink},t)}),y=(0,d["default"])((0,i["default"])("CollectionShowcaseNav"));t["default"]=y(function(){return a["default"].createElement("div",{className:m["default"].container},a["default"].createElement(v,{label:"All",pathname:"/collections"}),a["default"].createElement(v,{label:"Curated",pathname:"/collections/curated"}),a["default"].createElement(v,{label:"Featured",pathname:"/collections/featured"}))})},1045:function(e,t){e.exports={container:"_3dEiM _22ZDn dvlCB",pageLink:"Cxg87",activePageLink:"uOBnF _21rCr"}},1046:function(e,t){e.exports={container:"_3eaqv"}},1047:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.title="Collections",t.description="Explore the world through community-created collections of beautiful photos free to use under the Unsplash License.",t.canonical="https://unsplash.com/collections"}});
//# sourceMappingURL=15.def70.main.js.map